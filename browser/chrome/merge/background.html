<!DOCTYPE html>
<script>
(function () {
	'use strict';

	var id = 0;

	chrome.windows.getCurrent({}, function init(win) {
		id = win.id;
	});

	chrome.extension.onRequest.addListener(function (req, sender) {
		var url = req.url,
			tab = sender.tab;

		chrome.windows.get(tab.windowId, function (win) {
			if (win.type === 'popup') {
				chrome.tabs.remove(tab.id);
				chrome.tabs.create({
					windowId: id,
					url: url
				});
			}
		});
	});
}());
</script>
